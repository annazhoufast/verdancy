{"ast":null,"code":"import _defineProperty from\"/Users/annaqzhou/INFO/Capstone/verdancy-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/annaqzhou/INFO/Capstone/verdancy-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/annaqzhou/INFO/Capstone/verdancy-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/annaqzhou/INFO/Capstone/verdancy-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/annaqzhou/INFO/Capstone/verdancy-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/annaqzhou/INFO/Capstone/verdancy-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/annaqzhou/INFO/Capstone/verdancy-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import Errors from'../../../Errors/Errors';import api from'../../../../Constants/APIEndpoints/APIEndpoints';import PageTypes from'../../../../Constants/PageTypes/PageTypes';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ForgotPassword=/*#__PURE__*/function(_Component){_inherits(ForgotPassword,_Component);var _super=_createSuper(ForgotPassword);function ForgotPassword(props){var _this;_classCallCheck(this,ForgotPassword);_this=_super.call(this,props);_this.sendResetCode=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var email,sendData,response,error;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();email=_this.state.email;sendData={email:email};_context.next=5;return fetch(api.base+api.handlers.resetPasscode,{method:\"POST\",body:JSON.stringify(sendData),headers:new Headers({\"Content-Type\":\"application/json\"})});case 5:response=_context.sent;if(!(response.status>=300)){_context.next=12;break;}_context.next=9;return response.text();case 9:error=_context.sent;_this.setError(error);return _context.abrupt(\"return\");case 12:_this.setError(\"\");alert(\"A reset code has been sent to your email\");_this.setState({resetCodeSent:true});case 15:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.updatePassword=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var _this$state,email,password,passwordConf,resetCode,sendData,response,error;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();_this$state=_this.state,email=_this$state.email,password=_this$state.password,passwordConf=_this$state.passwordConf,resetCode=_this$state.resetCode;sendData={password:password,passwordConf:passwordConf,resetCode:resetCode};_context2.next=5;return fetch(api.base+api.handlers.passwords+email,{method:\"PUT\",body:JSON.stringify(sendData),headers:new Headers({\"Content-Type\":\"application/json\"})});case 5:response=_context2.sent;if(!(response.status>=300)){_context2.next=12;break;}_context2.next=9;return response.text();case 9:error=_context2.sent;_this.setError(error);return _context2.abrupt(\"return\");case 12:_this.setError(\"\");alert(\"Your password has been updated\");case 14:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();_this.setValue=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));};_this.setError=function(error){_this.setState({error:error});};_this.state={email:\"\",password:\"\",passwordConf:\"\",resetCode:\"\",resetCodeSent:false,error:\"\"};return _this;}_createClass(ForgotPassword,[{key:\"render\",value:function render(){var _this2=this;var _this$state2=this.state,email=_this$state2.email,password=_this$state2.password,passwordConf=_this$state2.passwordConf,resetCode=_this$state2.resetCode,resetCodeSent=_this$state2.resetCodeSent,error=_this$state2.error;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Errors,{error:error,setError:this.setError}),resetCodeSent?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(e){return _this2.updatePassword(e);},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Password: \"}),/*#__PURE__*/_jsx(\"input\",{name:\"password\",type:\"password\",onChange:this.setValue,value:password})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Password Confirmation: \"}),/*#__PURE__*/_jsx(\"input\",{name:\"passwordConf\",type:\"password\",onChange:this.setValue,value:passwordConf})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Reset Code: \"}),/*#__PURE__*/_jsx(\"input\",{name:\"resetCode\",onChange:this.setValue,value:resetCode})]}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Update my password\"})]})}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(e){return _this2.sendResetCode(e);},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Email: \"}),/*#__PURE__*/_jsx(\"input\",{name:\"email\",onChange:this.setValue,value:email})]}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Send me a reset code\"})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){return _this2.props.setPage(e,PageTypes.signIn);},children:\"Back to sign in\"})]});}}]);return ForgotPassword;}(Component);export default ForgotPassword;","map":{"version":3,"sources":["/Users/annaqzhou/INFO/Capstone/verdancy-client/src/Components/Auth/Components/ForgotPassword/ForgotPassword.js"],"names":["React","Component","Errors","api","PageTypes","ForgotPassword","props","sendResetCode","e","preventDefault","email","state","sendData","fetch","base","handlers","resetPasscode","method","body","JSON","stringify","headers","Headers","response","status","text","error","setError","alert","setState","resetCodeSent","updatePassword","password","passwordConf","resetCode","passwords","setValue","target","name","value","setPage","signIn"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Errors from '../../../Errors/Errors';\nimport api from '../../../../Constants/APIEndpoints/APIEndpoints';\nimport PageTypes from '../../../../Constants/PageTypes/PageTypes';\n\nclass ForgotPassword extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            email: \"\",\n            password: \"\",\n            passwordConf: \"\",\n            resetCode: \"\",\n            resetCodeSent: false,\n            error: \"\"\n        }\n    }\n\n    sendResetCode = async (e) => {\n        e.preventDefault();\n        const { email } = this.state;\n        const sendData = { email };\n        const response = await fetch(api.base + api.handlers.resetPasscode, {\n            method: \"POST\",\n            body: JSON.stringify(sendData),\n            headers: new Headers({\n                \"Content-Type\": \"application/json\"\n            })\n        });\n        if (response.status >= 300) {\n            const error = await response.text();\n            this.setError(error);\n            return;\n        }\n        this.setError(\"\");\n        alert(\"A reset code has been sent to your email\");\n        this.setState({ resetCodeSent: true });\n    }\n\n    updatePassword = async (e) => {\n        e.preventDefault();\n        const { email, password, passwordConf, resetCode } = this.state;\n        const sendData = { password, passwordConf, resetCode };\n        const response = await fetch(api.base + api.handlers.passwords + email, {\n            method: \"PUT\",\n            body: JSON.stringify(sendData),\n            headers: new Headers({\n                \"Content-Type\": \"application/json\"\n            })\n        });\n        if (response.status >= 300) {\n            const error = await response.text();\n            this.setError(error);\n            return;\n        }\n        this.setError(\"\");\n        alert(\"Your password has been updated\");\n    }\n\n    setValue = (e) => {\n        this.setState({ [e.target.name]: e.target.value });\n    }\n\n    setError = (error) => {\n        this.setState({ error });\n    }\n\n    render() {\n        const { email, password, passwordConf, resetCode, resetCodeSent, error } = this.state;\n        return <>\n            <Errors error={error} setError={this.setError} />\n            {resetCodeSent ?\n                <>\n                    <form onSubmit={(e) => this.updatePassword(e)}>\n                        <div>\n                            <span>Password: </span>\n                            <input name={\"password\"} type={\"password\"} onChange={this.setValue} value={password} />\n                        </div>\n                        <div>\n                            <span>Password Confirmation: </span>\n                            <input name={\"passwordConf\"} type={\"password\"} onChange={this.setValue} value={passwordConf} />\n                        </div>\n                        <div>\n                            <span>Reset Code: </span>\n                            <input name={\"resetCode\"} onChange={this.setValue} value={resetCode} />\n                        </div>\n                        <input type=\"submit\" value=\"Update my password\" />\n                    </form>\n                </>\n                :\n                <>\n                    <form onSubmit={(e) => this.sendResetCode(e)}>\n                        <div>\n                            <span>Email: </span>\n                            <input name={\"email\"} onChange={this.setValue} value={email} />\n                        </div>\n                        <input type=\"submit\" value=\"Send me a reset code\" />\n                    </form>\n                </>}\n            <button onClick={(e) => this.props.setPage(e, PageTypes.signIn)}>Back to sign in</button>\n\n\n        </>\n\n    }\n\n\n\n}\n\nexport default ForgotPassword;"]},"metadata":{},"sourceType":"module"}